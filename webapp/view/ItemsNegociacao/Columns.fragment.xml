<core:FragmentDefinition 
    xmlns:core="sap.ui.core"
    xmlns="sap.ui.table"
    xmlns:m="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    >

                <Column label="UF"
                    width="12%"
                    sortProperty="OrgID"
                    >
                    <template>
                        <m:HBox>
                        <core:Icon
                            src="{
                                parts: [ {path: 'IsDerivado'}, {path: 'IsTransferido'}, {path: 'IsGenerico'} ],
                                formatter: '.formatter.tipoItemIcon'
                                }"
                            tooltip="{
                                parts: [ {path: 'IsDerivado'}, {path: 'IsTransferido'}, {path: 'IsGenerico'} ],
                                formatter: '.formatter.tipoItemTooltip'
                                }"
                            class="sapUiTinyMarginEnd"
                            />
                        <m:Text text="{itemOrg/ID}" wrapping="true" />
                        </m:HBox>
                    </template>
                </Column>

                <Column label="Fornecedor"
                    width="9%"
                    sortProperty="FornecedorID"
                    >
                    <template>
                        <m:Text text="{FornecedorID}" wrapping="true" />
                    </template>
                </Column>

                <Column label="{
                    parts: [ {path: 'tipoNegociacao/ID'}, {path: 'TipoItemMercID'} ],
                    formatter: '.formatter.formatDescricaoItemMerc'
                    }" width="7%"
                    sortProperty="MaterialID"
                    >
                    <template>
                        <m:Text text="{
                            parts: [ {path: 'itemMerc/ID'}, {path: 'itemMerc/Type'} ],
                            formatter: '.formatter.formatItemMerc'
                            }" wrapping="true" />
                    </template>
                </Column>

                <Column label="Descrição" width="15%">
                    <template>
                        <m:Text text="{itemMerc/Nome}" wrapping="true" />
                    </template>
                </Column>

                <Column label="PMZ"
                    id="PMZColumn"
                    tooltip="Preço Margem Zero [BRL]"
                    hAlign="Right"
                    width="6%"
                    >
                    <template>

                        <m:VBox
                            visible="{= !${IsGenerico} }"
                            >

                            <m:Text text="{
                                path: 'simulacao/PMZNovo',
                                type: 'sap.ui.model.odata.type.Decimal',
                                constraints: {
                                    precision: 12,
                                    scale: 2 }
                                }" wrapping="true"
                                />

                            <m:Text text="{
                                path: 'informacao/PMZNovo',
                                type: 'sap.ui.model.odata.type.Decimal',
                                constraints: {
                                    precision: 12,
                                    scale: 2 }
                                }" wrapping="true"
                                visible="{view_ext>/ExibirInformacoesAtuaisItems}"
                                />

                        </m:VBox>

                    </template>
                </Column>

                <Column label="Var. PMZ"
                    id="VariacaoPMZColumn"
                    tooltip="Variação Preço Margem Zero [%]"
                    hAlign="Right"
                    width="6%"
                    >
                    <template>

                        <m:ObjectStatus
                            text="{
                                path: 'simulacao/VariacaoPMZ',
                                type: 'sap.ui.model.odata.type.Decimal',
                                constraints: { scale: 2 }
                                }" wrapping="true"
                            visible="{= !${IsGenerico} }"
                            state="{
                                path: 'simulacao/IC',
                                formatter: '.formatter.variacaoPMZStatus'
                                }"
                            />

                    </template>
                </Column>

               <Column label="Preço Venda"
                    id="precoVendaColumn"
                    tooltip="Preço Venda [BRL]"
                    hAlign="Right"
                    width="7%">
                    <template>

                        <m:VBox
                            >

                            <m:HBox >

                                <m:Text text="{
                                    path: 'informacao/PrecoVenda',
                                    type: 'sap.ui.model.odata.type.Decimal',
                                    constraints: {
                                        precision: 12,
                                        scale: 2 }
                                    }" wrapping="true"
                                    visible="{= !( ${view>/isNegociacaoEmAnalises} &amp;&amp; ${view>/tipoNegociacao} === 'A' ) }"
                                    />

                                <m:Input value="{
                                    path: 'simulacao/PrecoVenda',
                                    type: 'sap.ui.model.odata.type.Decimal',
                                    constraints: {
                                        precision: 12,
                                        scale: 2
                                        }
                                    }"
                                    change="onChangeReplicarEmFilhos"
                                    submit="onSubmit"
                                    enabled="{= ${view>/isNegociacaoEmAnalises} &amp;&amp; ${view>/tipoNegociacao} === 'A' }"
                                    visible="{= ${view>/isNegociacaoEmAnalises} &amp;&amp; ${view>/tipoNegociacao} === 'A' }"
                                    id="precoVendaEdit"
                                    maxLength="16"
                                    textAlign="Right"
                                    description=""
                                    />

                                <core:Icon
                                    class="sapUiTinyMarginBegin"
                                    src="{= ${PrecoVendaGerado} ? 'sap-icon://accept' : 'sap-icon://decline' }"
                                    visible="{= ( ${view>/isNegociacaoAprovada} || ${view>/isNegociacaoFinalizada} ) &amp;&amp; ${Aprovado} }"
                                    color="{= ${PrecoVendaGerado} ? 'green' : 'red'}" />

                            </m:HBox>

                            <m:Text text="{
                                path: 'informacao/PrecoVenda',
                                type: 'sap.ui.model.odata.type.Decimal',
                                constraints: {
                                    precision: 12,
                                    scale: 2 }
                                }" wrapping="true"
                                visible="{= !${IsGenerico} &amp;&amp; ${view_ext>/ExibirInformacoesAtuaisItems} }"
                                />

                        </m:VBox>

                    </template>
                </Column>

                <Column label="Mg PDV"
                    id="margemPDVColumn"
                    tooltip="Margem PDV [%]"
                    hAlign="Right"
                    >
                    <template>

                        <m:VBox
                            visible="{= !${IsGenerico} }"
                            >

                            <m:ObjectStatus
                                text="{
                                    path: 'simulacao/Margem1',
                                    type: 'sap.ui.model.odata.type.Decimal',
                                    constraints: { scale: 2 }
                                    }"
                                state="{
                                    parts: [ {path: 'simulacao/Margem1'}, {path: 'informacao/MargemTeorica'} ],
                                    formatter: '.formatter.margemStatus'
                                    }"
                                    />

                            <m:ObjectStatus
                                visible="{view_ext>/ExibirInformacoesAtuaisItems}"
                                text="{
                                    path: 'informacao/Margem1',
                                    type: 'sap.ui.model.odata.type.Decimal',
                                    constraints: { scale: 2 }
                                    }"
                                state="{
                                    parts: [ {path: 'simulacao/Margem1'}, {path: 'informacao/MargemTeorica'} ],
                                    formatter: '.formatter.margemStatus'
                                    }"
                                    />

                        </m:VBox>

                    </template>
                </Column>

                <Column label="Mg T"
                    id="MargemTeoricaColumn"
                    tooltip="Margem Teorica [%]"
                    hAlign="Right"
                    >
                    <template>

                        <m:Text text="{
                            path: 'informacao/MargemTeorica',
                            type: 'sap.ui.model.odata.type.Decimal',
                            constraints: {
                                precision: 12,
                                scale: 2 }
                            }" wrapping="true"
                            visible="{= !${IsGenerico} }"
                            />

                    </template>
                </Column>

                <Column label="Preço Mercado"
                    id="menorPrecoMercadoColumn"
                    tooltip="Preço de Mercado [BRL]"
                    hAlign="Right"
                    >
                    <template>
                        <m:Text text="{
                            path: 'informacao/MenorPrecoMercado',
                            type: 'sap.ui.model.odata.type.Decimal',
                            constraints: { scale: 2 }
                            }" wrapping="true"
                            visible="{= !${IsGenerico} }"
                            />
                    </template>
                </Column>

                <Column label="IC"
                    id="indiceCompetitividadeColumn"
                    tooltip="Indice de Competitividade [%]"
                    hAlign="Right"
                    >
                    <template>

                        <m:VBox
                            visible="{= !${IsGenerico} }"
                            >

                            <m:VBox >
                                <m:ObjectStatus
                                    text="{
                                        path: 'simulacao/IC',
                                        type: 'sap.ui.model.odata.type.Decimal',
                                        constraints: { scale: 2 }
                                        }" wrapping="true"
                                    visible="{
                                        parts: [ {path: 'informacao/MenorPrecoMercado'} ],
                                        formatter: '.formatter.isNotZero'
                                        }"
                                    state="{
                                        path: 'simulacao/IC',
                                        formatter: '.formatter.icStatus'
                                        }"
                                    />
                                <m:Text text="---"
                                    visible="{
                                        parts: [ {path: 'informacao/MenorPrecoMercado'} ],
                                        formatter: '.formatter.isZero'
                                        }"
                                    />
                            </m:VBox>

                            <m:VBox >
                                <m:ObjectStatus
                                    text="{
                                        path: 'informacao/IC',
                                        type: 'sap.ui.model.odata.type.Decimal',
                                        constraints: { scale: 2 }
                                        }" wrapping="true"
                                    state="{
                                        path: 'simulacao/IC',
                                        formatter: '.formatter.icStatus'
                                        }"
                                    visible="{view_ext>/ExibirInformacoesAtuaisItems}"
                                    />
                           </m:VBox>


                        </m:VBox>

                    </template>
                </Column>

                <Column id="consultasColumn" label="" width="7%">
                    <template>
                        <m:HBox>
                        <core:Icon
                            noTabStop="true"
                            class="sapUiTinyMarginEnd"
                            src="sap-icon://line-chart"
                            hoverColor="#386084"
                            tooltip="Vendas"
                            press="onMostrarVendas"
                            />
                        <core:Icon
                            noTabStop="true"
                            class="sapUiTinyMarginEnd"
                            src="sap-icon://product"
                            hoverColor="#386084"
                            tooltip="Estoque"
                            press="onMostrarEstoque"
                            />
                        <core:Icon
                            noTabStop="true"
                            src="sap-icon://commission-check"
                            hoverColor="#386084"
                            tooltip="Impostos"
                            press="onMostrarImpostos"
                            visible="{= !${IsGenerico} }"
                            />
                        </m:HBox>
                    </template>
                </Column>

                <Column id="aprovacaoColumn" label="Aprov." width="7%">
                    <template>
                        <m:Switch type="AcceptReject" state="{Aprovado}"
                            enabled="{= ${view>/isNegociacaoEmAnalises} &amp;&amp; ${view>/tipoNegociacao} === 'A' }"
                            visible="{
                                parts: [ {path: 'Pai'} ],
                                formatter: '.formatter.isAprovacaoItemVisible'
                                }"
                            />
                    </template>
                </Column>

                <!--
                <Column label="Custo Bruto"
                    id="custoBrutoEditavelColumn"
                    tooltip="Custo Bruto [BRL]"
                    hAlign="Right"
                    width="9%"
                    >
                    <template>

                        <m:VBox
                            >

                            <m:Text text="{
                                path: 'simulacao/CustoBruto',
                                type: 'sap.ui.model.odata.type.Decimal',
                                constraints: {
                                    precision: 16,
                                    scale: 6
                                    }
                                }" wrapping="true"
                                />


                            <m:Text text="{
                                path: 'informacao/CustoBruto',
                                type: 'sap.ui.model.odata.type.Decimal',
                                constraints: {
                                    precision: 16,
                                    scale: 6
                                    }
                                }" wrapping="true"
                                visible="{= !${IsGenerico} &amp;&amp; ${view_ext>/ExibirInformacoesAtuaisItems} }"
                                />

                        </m:VBox>

                    </template>
                </Column>

                <Column label="Desconto"
                    id="descontoColumn"
                    tooltip="Desconto [%]"
                    hAlign="Right"
                    width="7%"
                    >
                    <template>

                        <m:VBox
                            >

                            <m:Text text="{
                                path: 'simulacao/Desconto',
                                type: 'sap.ui.model.odata.type.Decimal',
                                constraints: {
                                    precision: 8,
                                    scale: 3 }
                                }" wrapping="true"
                                />

                            <m:Text text="{
                                path: 'informacao/Desconto',
                                type: 'sap.ui.model.odata.type.Decimal',
                                constraints: {
                                    precision: 8,
                                    scale: 3 }
                                }" wrapping="true"
                                visible="{= !${IsGenerico} &amp;&amp; ${view_ext>/ExibirInformacoesAtuaisItems} }"
                                />

                        </m:VBox>

                    </template>
                </Column>

                <Column label="Desp. Ac."
                    id="despesasAcessoriasColumn"
                    tooltip="Despesas Acessoria [BRL]"
                    hAlign="Right"
                    width="8%"
                    >
                    <template>

                        <m:VBox
                            >

                            <m:Text text="{
                                path: 'simulacao/DespesasAcessorias',
                                type: 'sap.ui.model.odata.type.Decimal',
                                constraints: {
                                    precision: 16,
                                    scale: 6 }
                                }" wrapping="true"
                                />

                            <m:Text text="{
                                path: 'informacao/DespesasAcessorias',
                                type: 'sap.ui.model.odata.type.Decimal',
                                constraints: {
                                    precision: 16,
                                    scale: 6 }
                                }" wrapping="true"
                                visible="{= !${IsGenerico} &amp;&amp; ${view_ext>/ExibirInformacoesAtuaisItems} }"
                                />

                        </m:VBox>

                    </template>
                </Column>
                -->


</core:FragmentDefinition>
