<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" >

    <Table 
    class="tabelaItens"
    keyboardMode="Edit"
    alternateRowColors="true"
    showSeparators="All"
    growing='false'
    growingThreshold='5'
    growingScrollToLoad='false'
    items="{
        path:'items',
        parameters:{
            templateShareable: true,
            expand:'simulacao,informacao,itemMerc,itemMerc/secao,itemMerc/grupo,itemOrg,negociacao'
            }
        }"
    id="ComparativoUFTable"
    mode="" 
    >
        <headerToolbar>
            <Toolbar width="auto" height="46px" design="Transparent" visible="true" enabled="true">
                <content>
                    <ToolbarSpacer width=""/>


                    <ToggleButton
                        pressed="{view_tab>/SemICMS}"
                        text="Sem ICMS"
                        icon="sap-icon://unpaid-leave"
                        iconFirst="false"
                        type="Transparent"
                        visible="{= !( !${Status} || ${Status} === 'T' ) }"
                        />

                </content>
                <tooltip/>
            </Toolbar>
        </headerToolbar>
        <columns>

            <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Phone" demandPopin="false" popinDisplay="Inline" mergeDuplicates="false">
                <header>
                    <Text text="Mercadoria" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>

            <Column width="20%" hAlign="Left" vAlign="Top" minScreenWidth="Phone" demandPopin="false" popinDisplay="Inline" mergeDuplicates="false">
                <header>
                    <Text text="Descrição" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>

            <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                <header>
                    <Text text="Fornecedor" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>

            <Column width="12%" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                <header>
                    <Text text="Seção" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>

            <Column width="18%" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                <header>
                    <Text text="Grupo" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>

            <Column width="4%" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                <header>
                    <Text text="UF" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>


            <Column width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false"
                visible="{= !${Status} || ${Status} === 'T' }"
                >
                <header>
                    <Text text="Custo Bruto" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>

            <Column width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false"
                visible="{= !${Status} || ${Status} === 'T' }"
                >
                <header>
                    <Text text="Desconto" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>

            <Column width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false"
                visible="{= !${Status} || ${Status} === 'T' }"
                >
                <header>
                    <Text text="Despesas Acessorias" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>


            <Column width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false"
                visible="{= !( !${Status} || ${Status} === 'T' ) }"
                >
                <header>
                    <Text text="Custo Novo" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>

            <Column width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false"
                visible="{= !( !${Status} || ${Status} === 'T' ) }"
                >
                <header>
                    <Text text="Custo Atual" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>

            <Column width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false"
                visible="{= !( !${Status} || ${Status} === 'T' ) }"
                >
                <header>
                    <Text text="Var. Custo" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>


            <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                <header>
                    <Text text="Aprovar" tooltip="Aprovar Custo" width="auto" wrapping="true" textAlign="Begin" textDirection="Inherit"/>
                </header>
                <footer/>
            </Column>

        </columns>
        <items>
            <ColumnListItem item="{item}">
                <cells>

                    <Text text="{
                        parts: [ {path: 'itemMerc/ID'}, {path: 'itemMerc/Type'} ],
                        formatter: '.formatter.formatItemMerc'
                        }" wrapping="true" />

                    <Text text="{itemMerc/Nome}" wrapping="true" />

                    <Text text="{FornecedorID}" wrapping="true" />

                    <Text text="{itemMerc/secao/Nome}" wrapping="true" />

                    <Text text="{itemMerc/grupo/Nome}" wrapping="true" />

                    <Text text="{itemOrg/ID}" wrapping="true" />

                    <Text text="{
                        path: 'simulacao/CustoBruto',
                        type: 'sap.ui.model.odata.type.Decimal',
                        constraints: {
                            precision: 16,
                            scale: 6
                            }
                        }" wrapping="true"
                        visible="{= !${negociacao/Status} || ${negociacao/Status} === 'T' }"
                        />

                    <Text text="{
                        path: 'simulacao/Desconto',
                        type: 'sap.ui.model.odata.type.Decimal',
                        constraints: {
                            precision: 8,
                            scale: 3 }
                        }" wrapping="true"
                        visible="{= !${negociacao/Status} || ${negociacao/Status} === 'T' }"
                        />


                    <Text text="{
                        path: 'simulacao/DespesasAcessorias',
                        type: 'sap.ui.model.odata.type.Decimal',
                        constraints: {
                            precision: 16,
                            scale: 6 }
                        }" wrapping="true"
                        visible="{= !${negociacao/Status} || ${negociacao/Status} === 'T' }"
                        />

                    <VBox
                        visible="{= !( !${negociacao/Status} || ${negociacao/Status} === 'T' ) }"
                        >

                        <Text text="{
                            path: 'simulacao/CustoReal',
                            type: 'sap.ui.model.odata.type.Decimal',
                            constraints: {
                                precision: 16,
                                scale: 6
                                }
                            }" wrapping="true"
                            />

                        <Text text="{
                            path: 'simulacao/CustoRealSemICMS',
                            type: 'sap.ui.model.odata.type.Decimal',
                            constraints: {
                                precision: 16,
                                scale: 6
                                }
                            }" wrapping="true"
                            visible="{view_tab>/SemICMS}"
                            />

                    </VBox>

                    <VBox
                        visible="{= !( !${negociacao/Status} || ${negociacao/Status} === 'T' ) }"
                        >

                        <Text text="{
                            path: 'informacao/CustoReal',
                            type: 'sap.ui.model.odata.type.Decimal',
                            constraints: {
                                precision: 16,
                                scale: 6
                                }
                            }" wrapping="true"
                            />

                        <Text text="{
                            path: 'informacao/CustoRealSemICMS',
                            type: 'sap.ui.model.odata.type.Decimal',
                            constraints: {
                                precision: 16,
                                scale: 6
                                }
                            }" wrapping="true"
                            visible="{view_tab>/SemICMS}"
                            />

                    </VBox>

                    <VBox
                        visible="{= !( !${negociacao/Status} || ${negociacao/Status} === 'T' ) }"
                        >

                        <Text text="{
                            path: 'simulacao/VariacaoCustoReal',
                            type: 'sap.ui.model.odata.type.Decimal',
                            constraints: {
                                precision: 12,
                                scale: 2
                                }
                            }" wrapping="true"
                            />

                        <Text text="{
                            path: 'simulacao/VariacaoCustoRealSemICMS',
                            type: 'sap.ui.model.odata.type.Decimal',
                            constraints: {
                                precision: 12,
                                scale: 2
                                }
                            }" wrapping="true"
                            visible="{view_tab>/SemICMS}"
                            />

                    </VBox>

                    <Switch type="AcceptReject" state="{Aprovado}"
                        enabled="{= ${view>/isNegociacaoEmAnalises} &amp;&amp; ${view>/tipoNegociacao} === 'A' }"
                        visible="{
                            parts: [ {path: 'Pai'} ],
                            formatter: '.formatter.isAprovacaoItemVisible'
                            }"
                        />

                </cells>
            </ColumnListItem>
        </items>
    </Table>

</core:FragmentDefinition>

